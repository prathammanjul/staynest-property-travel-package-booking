<% layout("layouts/boilerplate") %>



<div class="booking-container">
  <div class="booking-header">
    <button class="back-btn" id="backBtn">
      <i class="fas fa-arrow-left"></i>
    </button>
    <div class="header-content">
      <h1 class="booking-title">Complete Your Booking</h1>
      <p class="booking-subtitle">Fill in your details to book</p>
    </div>
  </div>

  <!-- <div class="booking-requirements">
    <div class="requirement-card">
      <i class="fas fa-info-circle"></i>
      <div class="requirement-content">
        <strong>Booking Requirements:</strong>
      </div>
    </div>
  </div> -->

  <div class="main-content">
    <div class="booking-summary-container">
      <div class="booking-summary">
        <div class="summary-header">
          <i class="fas fa-map-marker-alt"></i>
          <h3>Booking Summary</h3>
        </div>

        <div class="package-info">
          <div class="package-details">
            <h4 class="package-name"><%= package.title %></h4>
            <p class="package-type"><%= package.categories %></p>
            <p class="package-location">
                <%= `${package.location}, ${package.country}` %>

            </p>
            <p class="package-duration">
              <span class="days">1 </span> days 
            </p>
          </div>
        </div>

        <div class="price-summary">
          <div class="price-row">
            <span>Base Price</span>
            <span id="base-price" data-price="<%= package.price %>">
              ₹<%= package.price.toLocaleString("en-IN") %> / night
            </span>

          </div>
          <div class="price-row ">
            <span >Guests</span>
            <span id="summary-guest">1</span>
          </div>
          <hr class="divider" />
          <div class="price-row total">
            <span><strong>Total</strong></span>
            <span >
              <strong id="total-price">
              ₹<%= package.price.toLocaleString("en-IN") %> </strong>
              </span

            >
          </div>
        </div>
      </div>
    </div>

    <!-- Right Side - Form -->
    <div class="form-container">
      <form
        method="POST"
        action="/packages/<%=package._id%>/packageBookingForm"
        novalidate
        class="needs-validation"


      >
        <!-- Personal Information -->
        <div class="form-section">
          <div class="section-header">
            <i class="fas fa-user icon"></i>
            <h3>Personal Information</h3>
          </div>

          <div class="form-grid">
            <div class="form-group">
              <label for="firstName"
                >First Name <span class="required">*</span></label
              >
              <input
                name="booking[firstName]"
                type="text"
                id="firstName"
                placeholder="Enter your first name"
                class="form-control"
                required

              />

              <div class="valid-feedback">Looks Good!</div>
              <div class="invalid-feedback">Please enter your first name</div>
            </div>

            <div class="form-group">
              <label for="lastName"
                >Last Name <span class="required">*</span></label
              >
              <input
                name="booking[lastName]"
                type="text"
                id="lastName"
                placeholder="Enter your last name"
                class="form-control"
                required

              />
              <div class="valid-feedback">Looks Good!</div>
              <div class="invalid-feedback">Please enter your last name</div>
            </div>
          </div>

          <div class="form-grid">
            <div class="form-group">
              <label for="email">Email <span class="required">*</span></label>
              <input
                name="booking[email]"
                type="email"
                id="email"
                class="form-control"
                placeholder="Enter your email"
                required

              />
              <div class="valid-feedback">Looks Good!</div>
              <div class="invalid-feedback">Please enter valid email</div>
            </div>

            <div class="form-group">
              <label for="phone"
                >Phone Number <span class="required">*</span></label
              >
              <input
                name="booking[contact]"
                type="number"
                id="phone"
                placeholder="Enter your phone number"
                class="form-control"
                required

              />
              <div class="valid-feedback">Looks Good!</div>
              <div class="invalid-feedback">Please enter valid phone no</div>
            </div>
          </div>
        </div>

        <!-- Travel Details -->
        <div class="form-section">
          <div class="section-header">
            <i class="fas fa-calendar-alt icon"></i>
            <h3>Travel Details</h3>
          </div>

          <div class="form-grid">
            <div class="form-group">
              <label for="checkIn"
                >Check-in Date <span class="required">*</span></label
              >
              <input
                type="date"
                id="checkIn"
                class="form-control"
                name="booking[checkIn]"
                required

              />
              <div class="valid-feedback">Looks Good!</div>
              <div class="invalid-feedback">Select check in date</div>
            </div>

            
            <div class="form-group">
              <label for="checkOut"
                >Check-out Date <span class="required">*</span></label
              >
              <input
                type="date"
                id="checkOut"
                class="form-control"
                name="booking[checkOut]"
                required

              />
              <div class="valid-feedback">Looks Good!</div>
              <div class="invalid-feedback">Select check-out date</div>
            </div>
          </div>

          <div class="form-group" >
            <label for="guests">Number of Guests</label>
            <select id="guests" class="guests-dropdown" name="booking[guests]" >
              <option value="1">1 Guest</option>
              <option value="2">2 Guests</option>
              <option value="3">3 Guests</option>
              <option value="4">4 Guests</option>
            </select>
          </div>
        </div>

        <!-- Emergency Contact -->
        <div class="form-section">
          <div class="section-header">
            <i class="fas fa-phone-alt icon"></i>
            <h3>Emergency Contact</h3>
          </div>

          <div class="form-grid">
            <div class="form-group">
              <label for="emergencyContact">Emergency Contact Name</label>
              <input
                type="text"
                name="booking[emergencyContactName]"
                id="emergencyContact"
                placeholder="Full name of emergency contact"
                class="form-control"
              />
            </div>

            <div class="form-group">
              <label for="emergencyPhone">Emergency Contact Phone</label>
              <input
                type="number"
                name="booking[emergencyNumber]"
                id="emergencyPhone"
                placeholder="Emergency contact phone number"
                class="form-control"
              />
            </div>
          </div>
        </div>

        <!-- Special Requests -->
        <div class="form-section">
          <div class="section-header">
            <i class="fas fa-comment-alt icon"></i>
            <h3>Special Requests</h3>
          </div>

          <div class="form-group">
            <label for="specialRequests"
              >Any special requirements or requests?</label
            >
            <textarea
              name="booking[specialRequest]"
              id="specialRequests"
              placeholder="Please let us know about any dietary restrictions, accessibility needs, or special occasions..."
              rows="4"
            ></textarea>
          </div>
        </div>

        <!-- Terms and Submit -->
        <div class="form-footer">
          <p class="terms-text">
            By proceeding with this booking, you agree to our terms and
            conditions. You will receive a confirmation email with detailed
            booking information.
          </p>

          <div class="action-buttons">
            <button  class="btn-confirm">submit</button>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>


<script src="/js/packageBookingForm.js"> 
</script>
 
<script> const bookedRanges = <%- JSON.stringify(existingBooking) %>;</script>
 

