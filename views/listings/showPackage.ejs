<% layout("layouts/boilerplate") %>


  
<style>
 


.section {
  padding-bottom: 1.5rem;
  display: flex;
  justify-content: start;
  text-align: center;
  gap: 8rem;

  width: 100%;
}
.bullet-details .icon {
  font-size: 26px;
  color: #0da2e7;
  margin-bottom: 2px;
}

.bullet-details .days {
  font-size: 16px;
  color: #344256;
  font-weight: bold;
}
.bullet-details .duration {
  font-size: 14px;
  color: #566e8f;
}
h2 {
  font-size: 30px;
  color: #344256;
  font-weight: bold;
  margin-top: 2rem;
  margin-bottom: 1.2rem;
}

.p {
  font-size: 18px;
  color: #566e8f;
}

.list ul {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px 40px;
  padding: 0;
  margin: 0;
}
.list li {
  list-style: none;
  padding: 5px;

  font-size: 16px;
  color: #566e8f;
  font-weight: 600;
}
.list li i {
  font-size: 20px !important;
  color: #22c55e;
  margin-right: 8px;
  font-size: 16px;
}

.center {
  display: flex;
  align-items: center;

  position: absolute;
  bottom: 15px;
  left: 50%;
  gap: 0.1rem;

}
.like i {
  color: white;
}
.like button {
  background-color: #ffffff1a;
  opacity: 0.8;
  padding: 5px 10px 5px 10px;
  border-radius: 10px;
  border: #ffffff99 0.5px solid;
}
.like button:hover {
  opacity: 1;
}

/* Feature cards section */
.features-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
  margin-bottom: 2rem;
}


.feature-card {
  display: flex;
  align-items: center;
  gap: 15px;
  padding: 20px;
  border: 1px solid #e0e0e0;
  border-radius: 12px;
  background-color: #f8f9fa;
}
.feature-icon {
  width: 50px;
  height: 50px;
  border-radius: 50%;
  background-color: #0da2e7;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}
.feature-icon i {
  font-size: 20px;
  color: white;
}

.feature-content h4 {
  margin: 0 0 5px 0;
  color: #344256;
  font-size: 16px;
  font-weight: bold;
}
.feature-content p {
  margin: 0;
  color: #566e8f;
  font-size: 14px;
}
.it-card {
  margin-top: 1rem;
  margin-bottom: 0.5rem;
  border: 1px solid #e0e0e0;
  border-radius: 12px;
  padding: 15px;
  
}
.card-body {
  display: flex;
  align-items: center;

  padding: 0%;

  gap: 20px;
}

.card-container {
  margin-bottom: 5rem;

}
.day-number {
  background-color: #0da2e7 !important;
  color: white !important;
  width: 40px;
  height: 40px;
  border-radius: 50% !important;
  display: flex !important;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  font-size: 18px;
  flex-shrink: 0;
}
.card-content {
  flex: 1;
}
.card-title {
  font-size: 18px;
  font-weight: bold;
  margin-bottom: 8px;
  color: #333;
}
.card-text-d {
  color: #666;
  /* margin: 0; */
}
.includes ul {
  /* margin-bottom: 4rem; */
}
.trip-sidebar {
  background-color: #0da2e7;
}
.left-side {
  display: grid;
  display: inline-block;
  width: 60%;

}
.main-content {
  display: flex;
  justify-content: space-between;
  padding: 4rem 7rem 0rem 7rem;

  gap: 10rem;

}

.right-sidebar {
  flex: 1;
  max-width: 400px;

  position: sticky;

  height: auto;
}


.booking-card {
  background: white;
  border: 1px solid #e0e0e0;
  border-radius: 12px;
  padding: 24px;
  margin-bottom: 24px;
  height: 290px;
  width: 350px;
}
.booking-card h3 {
  font-size: 24px;
  font-weight: bold;
  color: #344256;

  /* margin-bottom: 16px; */
}
.price-section {
  margin-bottom: 20px;
}

.price-label {
  font-size: 14px;
  color: #566e8f;
  margin-bottom: 4px;
}

.price-value {
  font-size: 24px;
  font-weight: bold;
  color: #0da2e7;
  margin-bottom: 4px;
}
.book-now-btn {
  width: 100%;
  color: white;
  border: none;


  font-weight: 600;
  cursor: pointer;
}

.wishlist-btn {
  width: 100%;
  background-color: transparent;
  color: #344256;
  border: 1.5px solid #e0e0e0;
  padding: 9px;
  border-radius: 10px;
  font-weight: 600;
  font-size: 14px;
  cursor: pointer;
}
.wishlist-btn:hover {
  background-color: #f97415;
  border-color: #f97415;
  color: white;
}

.booking-card h4 {
  font-size: 20px;
  font-weight: bold;
  color: #344256;
  margin-bottom: 16px;
}
.help-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 0;
  border-bottom: 1px solid #f0f0f0;
}
.help-item:last-child {
  border-bottom: none;
}

.help-icon {
  width: 20px;
  height: 20px;
  border-radius: 8px;
  /* background-color: #f8f9fa; */
  display: flex;
  align-items: center;
  justify-content: center;
  color: #0da2e7;
  /* font-size: 16px; */
}

.help-text {
  font-size: 14px;
  color: #344256;
}

.contact-expert-btn {
  cursor: pointer;
  margin-top: 1rem !important;
}

.rating {
  display: flex;


}


.rating .fa-star {
  color: #f97415;
}
.category{
  color: white;
}
.review-content{
  padding: 4rem 7rem 0rem 7rem;

}

.fa-star{
  color: #f97415;
}

.starability-grow > label,
.starability-result::after {
  /* filter: hue-rotate(12deg) saturate(6) brightness(1.1); */
  filter:  saturate(20) hue-rotate(-10deg) brightness(1.05);

}






</style>
<div>
  <section class="poster">
    <div
    class="head"
    style="background-image: url('<%= package.image.url %>')"
  >
      
      <div class="back-btn btn" >
        <button class="button btn-signup" id="backBtn">Back</button>
      </div>
      <div class="content">
        <div class="rating">
          <p class="best-seller premium category"><%=package.category %></p>
        </div>
        <h1><%=package.title %></h1>
        <div class="mid">
          <p class="location">
            <i class="fas fa-map-marker-alt"></i> <%=package.country %>
          </p>
        </div>

        <div class="bottom">
          <p class="discount-price">
            &#8377; <%= package.price ? package.price.toLocaleString("en-IN") :
            "0" %>
          </p>
        </div>
        <p class="person">per person</p>
      </div>

       <div class="center">
        

        <% if (currUser && currUser._id.equals(package.owner._id)) { %>
          <div class="btn">
            <a href="/packages/<%= package.id%>/edit" class="btn-signup book">
              Edit →
            </a>
          </div>
          <form method="post" action="/packages/<%= package.id %>?_method=Delete">
            <button class="btn-signup book">Delete this listing</button>
          </form> 
      </div>
      </div>
      <% } %>

      

      </div>
    </div>
  </section>


  <!-- Main Content with Sidebar Layout -->
  <div class="main-content">
    <!-- Left Side Content -->
    <section class="left-side">
      <div class="section">
        <div class="bullet-details">
          <div class="icon"><i class="fa-regular fa-clock"></i></div>
          <div class="days"><%=package.duration %> Days </div>
          <div class="duration">Duration</div>
        </div>

        <div class="bullet-details">
          <div class="icon"><i class="fa-solid fa-users"></i></div>
          <div class="days"><%=package.groupSize %> people</div>
          <div class="duration">Group Size</div>
        </div>

        <div class="bullet-details">
          <div class="icon"><i class="fa-solid fa-star"></i></div>
          <div class="days"><%= "4/5"%></div>
          <div class="duration">Rating</div>
        </div>

        <div class="bullet-details">
          <div class="icon"><i class="fa-solid fa-heart"></i></div>
          <div class="days">4</div>
          <div class="duration">Reviews</div>
        </div>
      </div>
      <hr />

      <div class="description">
        <h2>About This Package</h2>
      </div>

      <p class="p"><%=package.description %></p>

      <!-- <div class="description">
        <h2>Package Highlights</h2>
      </div> -->

      <!-- <div class="list">
        <ul>
          <li *ngFor="let highlight of package.highlights">
            <i class="fa-regular fa-circle-check"></i> {{ highlight }}
          </li>
        </ul>
      </div> -->

      <div class="description">
        <h2>Package Features</h2>
      </div>

      <div class="features-grid">
        <div class="feature-card">
          <div class="feature-icon"><i class="fa-solid fa-fire"></i></div>
          <div class="feature-content">
            <h4>Popular Choice</h4>
            <p>Most booked package this season</p>
          </div>
        </div>

        <div class="feature-card">
          <div class="feature-icon"><i class="fa-solid fa-crown"></i></div>
          <div class="feature-content">
            <h4>Best Seller</h4>
            <p>Top rated by travelers</p>
          </div>
        </div>

        <div class="feature-card">
          <div class="feature-icon"><i class="fa-solid fa-gem"></i></div>
          <div class="feature-content">
            <h4>Premium Experience</h4>
            <p>Luxury accommodations included</p>
          </div>
        </div>

        <div class="feature-card">
          <div class="feature-icon">
            <i class="fa-solid fa-shield-check"></i>
          </div>
          <div class="feature-content">
            <h4>Safe & Secure</h4>
            <p>Travel insurance included</p>
          </div>
        </div>
      </div>

      <div class="description itinerary">
        <h2>Package Itinerary</h2>
      </div>

      <div class="card-container">
  <% for (let item of package.itinerary) { %>
    <div class="it-card" style="width: 50rem">
      <div class="card-body">
        <div class="day-number"><%= item.day %></div>

        <div class="card-content">
          <h5 class="card-title"><%= item.title %></h5>
          <p class="card-text-d"><%= item.description %></p>
        </div>
      </div>
    </div>
  <% } %>
</div>


      <div class="description itinerary">
        <h2>What's Included</h2>
      </div>

      <div class="list includes">
        <ul>
          <% for(let item of package.include) { %>
          <li>
            <i class="fa-regular fa-circle-check"></i> <%=item%>
          </li>
          <% } %>
        </ul>
      </div>

      
    </section>

    
    <!-- Right Sidebar -->
    <aside class="right-sidebar">
      <!-- Booking Card -->
      <div class="booking-card">
        <h3>Book This Trip</h3>
        <div class="price-section">
          <div class="price-value"> 
            &#8377; <%= package.price ? package.price.toLocaleString("en-IN") :
            "0" %>
          </div>
         
          <div class="price-label">Price per person:</div>
        </div>
        <button class="book-now-btn btn-signup">
          Book Now
        </button>

        <button
          class="wishlist-btn contact-expert-btn"
          
        >
          Add to Wishlist
        </button>
      </div>

      <!-- Need Help Card -->
      <div class="booking-card">
        <h4>Need Help?</h4>
        <div class="help-item">
          <div class="help-icon">
            <i class="fa-solid fa-plane"></i>
          </div>
          <div class="help-text">Flight booking assistance</div>
        </div>
        <div class="help-item">
          <div class="help-icon">
            <i class="fa-solid fa-bed"></i>
          </div>
          <div class="help-text">Accommodation upgrades</div>
        </div>
        <div class="help-item">
          <div class="help-icon">
            <i class="fa-solid fa-car"></i>
          </div>
          <div class="help-text">Local transport arrangements</div>
        </div>
        <button
          class="contact-expert-btn wishlist-btn"
        >
          Contact Travel Expert
        </button>
      </div>
    </aside>
  </div>
  <!-- <hr>  -->
    


  

  <!-- REVIEW SECTION  -->
  <div class="review-content show-heading ">
    <!-- <hr /> -->

    <% if (currUser && !package.owner.equals(currUser._id)) { %>
      <!-- <hr> -->
      <h4 class="mb-4 ">Leave a Reviews</h4>

  <form
    novalidate
    class="mb-5 needs-validation"
    action="/packages/<%= package.id %>/reviews"
    method="POST"
  >
  
      <div class="mt-3">
        <label for="rating" class="form-label"> Rating</label>
    <fieldset class="starability-grow fa-stars ">
  <input type="radio" id="no-rate" class="input-no-rate " name="review[rating]"value="1" checked aria-label="No rating." />
  <input type="radio" id="first-rate1" name="review[rating]" value="1" />
  <label for="first-rate1" title="Terrible">1 star</label>
  <input type="radio" id="first-rate2" name="review[rating]" value="2" />
  <label for="first-rate2" title="Not good">2 stars</label>
  <input type="radio" id="first-rate3" name="review[rating]" value="3" />
  <label for="first-rate3" title="Average">3 stars</label>
  <input type="radio" id="first-rate4" name="review[rating]" value="4" />
  <label for="first-rate4" title="Very good">4 stars</label>
  <input type="radio" id="first-rate5" name="review[rating]" value="5" />
  <label for="first-rate5" title="Amazing">5 stars</label>
</fieldset>
 </div>

    <div class="mb-3">
      <label for="comment" class="form-label"> Comments</label>
      <textarea
        name="review[comment]"
        id="comment"
        cols="30"
        rows="5"
        class="form-control"
        required
      ></textarea>

      <!-- //bootstrap classes for success failure text -->
      <div class="valid-feedback">Looks Good!</div>
      <div class="invalid-feedback">Please write the review!</div>
    </div>

    <button class="btn btn-login mt-3">Submit</button>
  </form>
<% } %>

<% if(package.reviews.length > 0){ %>
    <!-- <hr> -->
    
<section class="top-destination">
  <div class="heading">
    <h1>What Our Travelers Say</h1>
    <h5>
      Real experiences from real travelers who chose stayNest for their <br />
      adventures
    </h5>
  </div>



  
  <div class="testimonials-scroll-container">
  <% for (let reviews of package.reviews) { %>

    
   
  <div class="testimonial-card review-card">
      <div class="quote">❝</div>
         <p class="starability-result staticCardStar five-stars " data-rating = <%=reviews.rating %>>
  </p> 
      <p class="customer-review">
       <%=reviews.comment  %>
      </p>
      <div class="test-details">
        <div class="user-avatar">
          <img src="/uploads/david.jpg" alt="Sarah Johnson" />
        </div>

        <div class="user-info">
          <span class="user-name"><%=reviews.author.username  %></span>
          <span class="from"><%=package.country%></span>
          <span class="pack-name"><%=package.title  %></span>
        </div>
      </div>
          <!-- Review Delete button  -->

    <form
      action="/packages/<%= package._id %>/reviews/<%= reviews._id %>?_method=DELETE"
      method="POST"
      class="mb-1 mt-1"
    >
      <% if (currUser && !package.owner.equals(currUser._id)) { %>
      <button class="btn btn-sm btn-login ">Delete</button>
        <% } %>
    </form>
    </div>
  


  <% } %>
 </div>
</div>
</div>
</section>

<% } %>



  <div class="travel-agent">
    <h1>Would you like to customize this package?</h1>
    <p>
      Our travel experts will tailor it to suit your preferences and budget.
    </p>
    <div class="btn">
  <a class="btn-signup"
    >Contact Travel Expert &rarr;</a
  >
</div>
  </div>


<script> // 5. Back Button
document.getElementById("backBtn").addEventListener("click", function () {
  window.history.back();
});</script>
</div>
